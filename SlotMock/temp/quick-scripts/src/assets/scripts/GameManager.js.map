{"version":3,"sources":["assets\\scripts\\GameManager.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC,CAAC,iCAAiC;AAG9E;IAAyC,+BAAY;IAArD;QAAA,qEAsDC;QApDC,aAAO,GAAG,IAAI,CAAC;QAGf,gBAAU,GAAG,IAAI,CAAC;QAEV,WAAK,GAAG,KAAK,CAAC;QAEd,YAAM,GAAG,IAAI,CAAC;;IA6CxB,CAAC;IA3CC,2BAAK,GAAL;QACE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,aAAa,EAAE,CAAC;IACvD,CAAC;IAED,4BAAM,GAAN;QACE,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,EAAE;YACrC,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACpB;IACH,CAAC;IAED,0BAA0B;IAC1B,2BAAK,GAAL;QACE,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;QAElD,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,QAAQ,KAAK,KAAK,EAAE;YAC3D,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;YAC5C,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;aAAM,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;SAC7C;IACH,CAAC;IAEK,mCAAa,GAAnB;uCAAuB,OAAO;;;;;wBAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;wBACnB,KAAA,IAAI,CAAA;wBAAU,qBAAM,IAAI,CAAC,SAAS,EAAE,EAAA;;wBAApC,GAAK,MAAM,GAAG,SAAsB,CAAC;;;;;KACtC;IAED,+BAAS,GAAT;QACE,IAAM,UAAU,GAAG,EAAE,CAAC;QACtB,OAAO,IAAI,OAAO,CAAuB,UAAA,OAAO;YAC9C,UAAU,CAAC;gBACT,OAAO,CAAC,UAAU,CAAC,CAAC;YACtB,CAAC,EAAE,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gCAAU,GAAV;QACE,IAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC;QAClC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC3D,CAAC;IAnDD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACH;IAGf;QADC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC;mDACf;IALC,WAAW;QAD/B,OAAO;OACa,WAAW,CAsD/B;IAAD,kBAAC;CAtDD,AAsDC,CAtDwC,EAAE,CAAC,SAAS,GAsDpD;kBAtDoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator; // Introduce ccclass and property\r\n\r\n@ccclass\r\nexport default class GameManager extends cc.Component {\r\n  @property(cc.Node)\r\n  machine = null;\r\n\r\n  @property({ type: cc.AudioClip })\r\n  audioClick = null;\r\n\r\n  private block = false;\r\n\r\n  private result = null;\r\n\r\n  start(): void {\r\n    this.machine.getComponent('Machine').createMachine();\r\n  }\r\n\r\n  update(): void {\r\n    if (this.block && this.result != null) {\r\n      this.informStop();\r\n      this.result = null;\r\n    }\r\n  }\r\n\r\n  //click effect starts game\r\n  click(): void {\r\n    cc.audioEngine.playEffect(this.audioClick, false);\r\n\r\n    if (this.machine.getComponent('Machine').spinning === false) {\r\n      this.block = false;\r\n      this.machine.getComponent('Machine').spin();\r\n      this.requestResult();\r\n    } else if (!this.block) {\r\n      this.block = true;\r\n      this.machine.getComponent('Machine').lock();\r\n    }\r\n  }\r\n\r\n  async requestResult(): Promise<void> {\r\n    this.result = null;\r\n    this.result = await this.getAnswer();\r\n  }\r\n\r\n  getAnswer(): Promise<Array<Array<number>>> {\r\n    const slotResult = [];\r\n    return new Promise<Array<Array<number>>>(resolve => {\r\n      setTimeout(() => {\r\n        resolve(slotResult);\r\n      }, 1000 + 500 * Math.random());\r\n    });\r\n  }\r\n\r\n  informStop(): void {\r\n    const resultRelayed = this.result;\r\n    this.machine.getComponent('Machine').stop(resultRelayed);\r\n  }\r\n}\r\n"]}